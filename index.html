<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <meta charset="utf-8"/>
    <title>만명 블로그</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" >
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.1/styles/default.min.css">
    <link href="css/screen.css" rel="stylesheet" type="text/css" />
    <link href="css/asciidoc.css" rel="stylesheet" type="text/css" />
    </head>
    <body>
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <h1><a class="navbar-brand" href="/index.html">만명 블로그</a></h1>
            </div>
            <!-- nav links -->
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li  class="active" ><a href="/index.html">Home</a></li>
                    <li ><a href="/archives.html">Archives</a></li>
                    
                    <li >
                        <a href="/pages/about.html">About</a>
                    </li>
                    
                    <li><a href="/feed.xml">RSS</a></li>
                </ul>
            </div><!--/.nav-collapse -->
        </div>
    </nav>

    <div id="wrapper" class="container">
        <div class="row">
            <div class="col-md-8">
                <div id="content">
                
<div id="post">
    <div id="post-header">
    <h1>Cordova와 ClojureScript를 이용하여 안드로이드앱 만들기</h1>
    <div id="post-meta">
        
        <div class="date">April 12, 2015</div>
    </div>
</div>
<div id="post-content">
    
    <p><a href='http://cordova.apache.org/'>Cordova</a>는 HTML, JavaScript등의 웹기술로 안드로이드나 아이폰앱을 만들 때 가장 많이 사용하는 프레임워크 중 하나이다. 이것으로 ClojureScript 안드로이드앱을 만들어 보자. 이 글에서는 맥 환경을 기준으로 설명한다.</p><h2><a name="1.&#95;clojurescript&#95;프로젝트&#95;세팅"></a>1. ClojureScript 프로젝트 세팅</h2><pre><code>$ lein new cljs-webapp hello-cordova
$ cd hello-cordova
$ lein cljsbuild once dev
</code></pre><p><code>/resources/public/index.html</code> 을 웹브라우저로 열면 화면에 <code>Hello!</code> 가 보인다.</p><p>글씨가 좀더 크게 보이도록 <code>/src-cljs/hello&#95;cordova/core.cljs</code> 를 다음처럼 수정.</p><pre><code>&#40;ns hello-cordova.core&#41;

&#40;.write js/document &quot;&lt;h1&gt;Hello!&lt;/h1&gt;&quot;&#41;
</code></pre><p>다시 빌드.</p><pre><code>$ lein cljsbuild once dev
</code></pre><p>웹브라우저에서 다시 보면 <code>Hello!</code> 가 커졌다.</p><p>이 기본적인 웹앱을 안드로이드앱으로 옮길 것이다.</p><h2><a name="2.&#95;안드로이드&#95;sdk&#95;설치"></a>2. 안드로이드 SDK 설치</h2><p><a href="https://developer.android.com/sdk/index.html#Other">https://developer.android.com/sdk/index.html#Other</a> 에서 android-sdk_r24.1.2-macosx.zip를 다운받아 압축을 푼다. 이글에서 IDE를 포함하지 않은 SDK Tools Only를 선택한 이유는 간단한 설치를 위해서이다.</p><p>각자 안드로이드 SDK를 압축 푼 위치에 따라 밑의 내용을 수정하여 <code>&#126;/.bash&#95;profile</code>에 추가한다. </p><p><code>export PATH=${PATH}:&#126;/project/android-sdk-macosx/platform-tools:&#126;/project/android-sdk-macosx/tools</code></p><p>이 변경사항을 현재 터미널 창에 바로 반영한다.</p><pre><code>$ source &#126;/.bash&#95;profile
</code></pre><p>현재 터미널에서 안드로이드 SDK 사용가능한지 확인.</p><pre><code>$ android -h
</code></pre><h2><a name="3.&#95;cordova&#95;설치"></a>3. Cordova 설치</h2><p><a href="https://nodejs.org/">https://nodejs.org/</a> 에서 인스톨 파일 다운받아 설치. 그러면 Node.js와 npm이 설치된다.</p><p>Cordova 설치.</p><pre><code>$ sudo npm install cordova -g
</code></pre><p>Cordova 설치되었는지 확인.</p><pre><code>$ cordova -v
</code></pre><h2><a name="4.&#95;clojurescript&#95;프로젝트&#95;내부에&#95;cordova&#95;프로젝트&#95;생성"></a>4. ClojureScript 프로젝트 내부에 Cordova 프로젝트 생성</h2><pre><code>$ cd hello-cordova
$ cordova create assets com.hello-cordova HelloCordova
</code></pre><p>안드로이드 플랫폼용 파일 추가하려고 하면 다음처럼 에러가 난다.</p><pre><code>$ cd assets
$ cordova platform add android
...
Error: Please install Android target &quot;android-19&quot;.
...
</code></pre><p>이를 해결하기 위해서는 해당 안드로이드 SDK (지금은 android-19)를 설치해야 한다.</p><pre><code>$ android
</code></pre><p>Android SDK Manager에서 <code>Tools/Android SDK Build-tools&#40;Rev. 22.0.1&#41;</code> 과 <code>Android 4.4.2&#40;API 19&#41;</code>를 선택 후 Install... 버튼을 누른다. 이후 <code>Android SDK License</code>를 선택 후, <code>Accept License</code> 을 체크한 후 Install 버튼을 누른다.</p><p>다시 안드로이드 플랫폼용 파일 추가</p><pre><code>$ cordova platform add android
</code></pre><h2><a name="5.&#95;디바이스에서&#95;cordova&#95;예제&#95;확인"></a>5. 디바이스에서 Cordova 예제 확인</h2><p>앞에서 추가한 Cordova 예제를 디바이스에서 확인하기 위해서는 디바이스의 옵션을 변경해야 한다. 각자의 디바이스에서 환경설정 -> 개발자 옵션 -> USB 디버깅 활성화 한다. 그리고 환경설정 -> 보안 -> 알수 없는 소스를 활성화 한다. </p><p>이제 다음을 실행하자.</p><pre><code>$ cordova run android
</code></pre><p>이렇게 하면 앱을 빌드하여 디바이스에 넣은 후 심지어 앱을 자동으로 실행한다.</p><p>결과:</p><p><img src="/img/2015-04-12-post/img1.jpg" width="300"></p><h2><a name="6.&#95;안드로이드앱으로&#95;변환"></a>6. 안드로이드앱으로 변환</h2><p>1번에서 만든 웹앱을 안드로이드앱으로 옮기자. 이를 위해서는 <code>/resources</code>의 내용을 <code>/assets</code>에 합쳐야 한다. 방법은 다음과 같다.</p><p><code>/assets/www/index.html</code> 을 다음처럼 수정한다.</p><pre><code>&lt;html&gt;
    &lt;head&gt;
        &lt;meta charset=&quot;utf-8&quot; /&gt;
        &lt;meta name=&quot;format-detection&quot; content=&quot;telephone=no&quot; /&gt;
        &lt;meta name=&quot;msapplication-tap-highlight&quot; content=&quot;no&quot; /&gt;
        &lt;!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 --&gt;
        &lt;meta name=&quot;viewport&quot; content=&quot;user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi&quot; /&gt;
        &lt;title&gt;Hello World&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;script type=&quot;text/javascript&quot; src=&quot;cordova.js&quot;&gt;&lt;/script&gt;
        &lt;script type=&quot;text/javascript&quot; src=&quot;js/index.js&quot;&gt;&lt;/script&gt;

        &lt;script src=&quot;js/goog/base.js&quot;&gt;&lt;/script&gt;
        &lt;script src=&quot;js/cljs.js&quot;&gt;&lt;/script&gt;
        &lt;script type=&quot;text/javascript&quot;&gt;goog.require&#40;&quot;hello&#95;cordova.core&quot;&#41;;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
</code></pre><p><code>project.clj</code> 에서 <code>resources/public</code>을 모두 <code>assets/www</code> 으로 바꾼다.</p><p>클로저스크립트 다시 빌드.</p><pre><code>$ lein cljsbuild once dev
</code></pre><p><code>/assets/www/index.html</code> 을 웹브라우저로 열면 이전처럼 <code>Hello!</code> 가 보인다.</p><p>디바이스에서 확인.</p><pre><code>$ cd assets
$ cordova run android
</code></pre><p>결과:</p><p><img src="/img/2015-04-12-post/img2.jpg" width="300"></p><p>끝!</p><h2><a name="7.&#95;이후&#95;진행"></a>7. 이후 진행</h2><p>지금까지 기본적인 안드로이드앱을 만들었다. 더 진행하려면 다음을 추천한다.</p><ul><li>iOS 앱 빌드: <a href='http://cordova.apache.org/docs/en/4.0.0/guide&#95;platforms&#95;ios&#95;index.md.html#iOS%20Platform%20Guide'>iOS Platform Guide</a></li><li>본격적인 Cordova 개발: <a href='http://www.yes24.com/24/goods/16669540'>하이브리드 앱을 구현하는 기술</a></li><li>ClojureScript UI 라이브러리: <a href='http://reagent-project.github.io/'>Reagent</a></li></ul><h2><a name="참고"></a>참고</h2><ul><li><a href='https://judithmassa.wordpress.com/2014/06/13/clojurescript-and-phonegap-setup-for-a-mobile-app/'>Clojurescript and Phonegap: Setup for a Mobile App</a></li><li><a href='http://www.yes24.com/24/goods/16669540'>하이브리드 앱을 구현하는 기술</a></li><li><a href='http://cordova.apache.org/docs/en/4.0.0/guide&#95;platforms&#95;android&#95;index.md.html#Android%20Platform%20Guide'>Android Platform Guide</a></li></ul>
</div>
<div id="post-hr">
<hr>
</div>


    
    <div id="comments">
        <a href="/posts/2015-04-12-post.html#disqus_thread">View Comments</a>
    </div>
    

    <div id="prev-next">
        
        
        
        <a href="/posts/2015-03-17-post.html">IntelliJ + Cursive 클로저 개발 환경 만들기 &raquo;</a>
        
    </div>
</div>

                </div>
            </div>

            <div class="col-md-3">
                <div id="sidebar">
                    <!--<h3>Links</h3>-->
                    <!--<ul id="links">-->
                        <!--<li><a href="http://carmenla.me/blog/index.html">Carmen's Blog</a></li>-->
                        <!---->
                    <!--</ul>-->
                    <div id="recent">
                        <h3>Recent Posts</h3>
                        <ul>
                        
                        <li><a href="/posts/2015-04-12-post.html">Cordova와 ClojureScript를 이용하여 안드로이드앱 만들기</a></li>
                        
                        <li><a href="/posts/2015-03-17-post.html">IntelliJ + Cursive 클로저 개발 환경 만들기</a></li>
                        
                        <li><a href="/posts/2015-01-16-post.html">블로그 엔진 교체</a></li>
                        
                        <li><a href="/posts/2015-01-15-post.html">Cordova로 만드는 안드로이드 앱에서 스플래시 화면 구현</a></li>
                        
                        <li><a href="/posts/2015-01-11-post.html">4clojure 다시 풀기</a></li>
                        
                        </ul>
                    </div>
                    <!--<div id="tags">-->
                        <!--<h3>Tags</h3>-->
                        <!--<ul>-->
                        <!---->
                        <!--</ul>-->
                    <!--</div>-->
                </div>
            </div>
        </div>
        <footer>
            <!--Copyright &copy; 2014 BLOGAWESOME-->
            <p style="text-align: center;">Powered by <a href="http://cryogenweb.org">Cryogen</a></p></footer>
    </div>
        <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
        <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
        <script src="js/highlight.pack.js" type="text/javascript"></script>
        <script>hljs.initHighlightingOnLoad();</script>
    </body>
</html>
